<local:ApplicationSubPage
    x:Class="Reloaded.Mod.Launcher.Pages.Alt.BaseSubpages.ApplicationSubPages.AppSummaryPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:cc="clr-namespace:Reloaded.Mod.Launcher.Controls.Mods"
    xmlns:controls="clr-namespace:Reloaded.WPF.Controls;assembly=Reloaded.WPF"
    xmlns:converters="clr-namespace:Reloaded.Mod.Launcher.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:dd="urn:gong-wpf-dragdrop"
    xmlns:fa="http://schemas.awesome.incremented/wpf/xaml/fontawesome.sharp"
    xmlns:local="clr-namespace:Reloaded.Mod.Launcher.Pages.BaseSubpages.ApplicationSubPages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:properties="clr-namespace:Reloaded.Mod.Launcher.Controls.Properties"
    xmlns:system="clr-namespace:System;assembly=mscorlib"
    Title="{DynamicResource TitleConfigureMods}"
    d:DesignHeight="540"
    d:DesignWidth="960"
    mc:Ignorable="d">

    <Grid x:Name="Contents" DataContext="{Binding ViewModel, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Page}}}">

        <!--  Resources  -->
        <Grid.Resources>
            <system:Double x:Key="ImageSize">180</system:Double>

            <!--  Filtered Mod List  -->
            <CollectionViewSource
                x:Key="FilteredMods"
                IsLiveFilteringRequested="True"
                Source="{Binding AllMods, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                <!--  Filtering setup in code behind.  -->
            </CollectionViewSource>

        </Grid.Resources>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="8" />
            <ColumnDefinition Width="3*" />
        </Grid.ColumnDefinitions>

        <!--  Items  -->
        <Grid Grid.Column="2">
            <Grid.RowDefinitions>
                <RowDefinition Height="auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <Grid Margin="0,12">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="auto" />
                    <ColumnDefinition Width="auto" />
                </Grid.ColumnDefinitions>

                <TextBox
                    x:Name="ModsFilter"
                    VerticalAlignment="Bottom"
                    AutomationProperties.Name="{DynamicResource ModManagerSearchMods}"
                    Style="{DynamicResource TextboxWithPlaceholder}"
                    Tag="{DynamicResource ModManagerSearchMods}"
                    TextChanged="ModsFilter_TextChanged" />

                <ComboBox
                    Grid.Column="1"
                    Width="130"
                    Margin="{DynamicResource CommonItemHorizontalMarginLeft}"
                    AutomationProperties.Name="{DynamicResource ConfigureModsSelectTagTooltip}"
                    DockPanel.Dock="Right"
                    ItemsSource="{Binding AllTags}"
                    SelectedItem="{Binding SelectedTag}"
                    ToolTip="{DynamicResource ConfigureModsSelectTagTooltip}"
                    ToolTipService.InitialShowDelay="0" />

                <ComboBox Grid.Column="2" Width="100">
                    <CheckBox Content="Compact" IsChecked="{Binding IsCompact}" />
                    <CheckBox Content="Horizontal" IsChecked="{Binding IsHorizontal}" />
                </ComboBox>
            </Grid>

            <cc:ModsList
                Grid.Row="1"
                IsCompact="{Binding IsCompact}"
                ModsSource="{Binding Source={StaticResource FilteredMods}}"
                PreviewKeyDown="KeyboardControls_KeyDown"
                SelectedMod="{Binding SelectedMod, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                <cc:ModsList.Style>
                    <Style TargetType="{x:Type cc:ModsList}">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding IsHorizontal}" Value="True">
                                <Setter Property="Orientation" Value="Horizontal" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </cc:ModsList.Style>
            </cc:ModsList>
        </Grid>

        <cc:ModPanel />
    </Grid>
</local:ApplicationSubPage>
